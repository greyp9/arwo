<?xml version='1.0' encoding='UTF-8'?>
<project name='arwo-app-findbugs' default='main' basedir='.'>

    <!--fixed-->
    <property name='m2.dir' value='${user.home}/.m2/repository' description='maven repository (for libs)'/>
    <property name='findbugs.dir' value='${user.home}/Downloads/findbugs-2.0.3'/>
    <!--fixed-->
    <property name='project.dir' location='${basedir}/../../../../../..' description='(suggested) ~/arwo'/>
    <property name='src.core.dir' location='${project.dir}/src/main/core/java'/>
    <property name='src.lib.dir' location='${project.dir}/src/main/lib/java'/>
    <property name='test.src.core.dir' location='${project.dir}/src/test/core/java'/>
    <property name='test.src.lib.dir' location='${project.dir}/src/test/lib/java'/>
    <!--transient-->
    <property name='target.dir' value='${project.dir}/target'/>
    <property name='classes.core.dir' value='${target.dir}/app/classes-core'/>
    <property name='classes.lib.dir' value='${target.dir}/app/classes-lib'/>
    <property name='test.classes.core.dir' value='${target.dir}/app/test-classes-core'/>
    <property name='test.classes.lib.dir' value='${target.dir}/app/test-classes-lib'/>

    <path id='classpath-findbugs'>
        <fileset dir='${findbugs.dir}'>
            <include name='lib/findbugs.jar'/>
        </fileset>
    </path>

    <taskdef name='findbugs' classname='edu.umd.cs.findbugs.anttask.FindBugsTask' classpathref='classpath-findbugs'/>

    <property name='filter' value='${basedir}/findbugs-filter.xml'/>

    <target name='findbugs-core'>
        <findbugs home='${findbugs.dir}' excludeFilter='${filter}' reportlevel='low' output='text' failonerror='true'>
            <fileset dir='${classes.core.dir}'>
                <include name='**/*.class'/>
            </fileset>
            <sourcepath path='${src.core.dir}'/>
        </findbugs>
        <!--
        <findbugs home='${findbugs.dir}' excludeFilter='${filter}' reportlevel='low' output='text' failonerror='true'>
            <fileset dir='${test.classes.core.dir}'>
                <include name='**/*.class'/>
            </fileset>
            <sourcepath path='${test.src.core.dir}'/>
        </findbugs>
        -->
    </target>

    <target name='findbugs-lib'>
        <!--
        <findbugs home='${findbugs.dir}' excludeFilter='${filter}' reportlevel='low' output='text' failonerror='true'>
            <fileset dir='${classes.lib.dir}'>
                <include name='**/*.class'/>
            </fileset>
            <sourcepath path='${src.lib.dir}'/>
        </findbugs>
        -->
        <findbugs home='${findbugs.dir}' excludeFilter='${filter}' reportlevel='low' output='text' failonerror='true'>
            <auxclasspath location='${m2.dir}/junit/junit/4.11/junit-4.11.jar'/>
            <auxclasspath location='${m2.dir}/ch/ethz/ganymed/ganymed-ssh2/262/ganymed-ssh2-262.jar'/>
            <auxclasspath location='${m2.dir}/jcifs/jcifs/1.3.17/jcifs-1.3.17.jar'/>
            <auxclasspath
                    location='${m2.dir}/org/glassfish/main/external/j-interop-repackaged/4.1/j-interop-repackaged-4.1.jar'/>
            <auxclasspath location='${m2.dir}/com/sun/mail/javax.mail/1.5.4/javax.mail-1.5.4.jar'/>
            <auxclasspath location='${classes.core.dir}'/>
            <fileset dir='${test.classes.lib.dir}'>
                <include name='**/*.class'/>
            </fileset>
            <sourcepath path='${test.src.lib.dir}'/>
        </findbugs>
    </target>

    <target name='main' depends='findbugs-core, findbugs-lib' description='Use -p to view help information.'>
        <echo message='project.dir: ${project.dir}'/>
    </target>

</project>
